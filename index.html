<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <LINK rel="icon" type="Images/png"href="/asset/logo.jpg"></LINK>
    <title>QuickRevise Flashcards</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .header-video-container {
        width: 100%;
        height: 300px;
        position: relative;
        overflow: hidden;
      }

      .header-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .header-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(102, 126, 234, 0.6);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .header-title {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 10px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
      }

      .header-subtitle {
        font-size: 1.3rem;
        font-weight: 300;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
      }

      .navbar {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .navbar-brand {
        font-weight: 700;
        color: #9b5de0 !important;
        font-size: 1.5rem;
      }

      .nav-link {
        color: #333 !important;
        font-weight: 500;
        transition: color 0.3s;
      }

      .nav-link:hover {
        color: #9b5de0 !important;
      }

      .progress-bar-container {
        width: 100%;
        height: 5px;
        background: rgba(255, 255, 255, 0.3);
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
      }

      .progress-bar-fill {
        height: 100%;
        background: linear-gradient(90deg, #ffb433, #9b5de0);
        width: 0%;
        transition: width 0.5s ease;
      }

      .container-main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .page-section {
        display: none;
      }

      .page-section.active {
        display: block;
      }

      /* Home Page Styles */
      .hero-section {
        text-align: center;
        padding: 40px 20px 20px;
        color: white;
      }

      .hero-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 15px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .hero-subtitle {
        font-size: 1.1rem;
        margin-bottom: 30px;
        opacity: 0.9;
      }

      .flashcard-gallery {
        display: flex;
        gap: 20px;
        justify-content: center;
        align-items: center;
        margin: 40px 0;
        padding: 20px;
        overflow-x: auto;
      }

      .gallery-image {
        max-width: 350px;
        width: 100%;
        height: auto;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .gallery-image:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      }

      .topic-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 40px;
      }

      .topic-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
        position: relative;
        overflow: hidden;
      }

      .topic-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      }

      .topic-card h3 {
        color: #9b5de0;
        margin-bottom: 10px;
        font-weight: 600;
      }

      .topic-card p {
        color: #666;
        font-size: 0.9rem;
      }

      .delete-topic-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #ff4757;
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.3s;
      }

      .delete-topic-btn:hover {
        background: #ff3838;
      }

      /* Study Page Styles */
      .study-container {
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
        perspective: 1000px;
      }

      .flashcard-wrapper {
        perspective: 1000px;
        margin-bottom: 40px;
        display: flex;
        justify-content: center;
      }

      .flashcard {
        width: 600px;
        height: 400px;
        position: relative;
        transform-style: preserve-3d;
        cursor: pointer;
        transform-origin: center center; /* Pastikan rotasi dari tengah */
      }

      .flashcard-face {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        font-size: 1.8rem;
        font-weight: 600;
        text-align: center;
      }

      .flashcard-front {
        background: linear-gradient(135deg, #ffb433, #ffd700);
        color: #333;
      }

      .flashcard-back {
        background: linear-gradient(135deg, #71a0a5, #5dade2);
        color: white;
        transform: rotateY(180deg);
      }

      .delete-card-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255, 71, 87, 0.9);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.3rem;
        z-index: 10;
      }

      .controls {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .btn-control {
        background: white;
        border: none;
        padding: 15px 30px;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .btn-control:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      .btn-flip {
        background: #9b5de0;
        color: white;
        font-size: 1.1rem;
      }

      .card-counter {
        color: white;
        font-size: 1.2rem;
        font-weight: 600;
        margin-top: 20px;
      }

      /* Create Card/Topic Styles */
      .form-container {
        max-width: 600px;
        margin: 40px auto;
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      }

      .form-container h2 {
        color: #9b5de0;
        margin-bottom: 30px;
        text-align: center;
      }

      .form-label {
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
      }

      .form-control,
      .form-select {
        border-radius: 10px;
        border: 2px solid #e0e0e0;
        padding: 12px;
        margin-bottom: 20px;
      }

      .form-control:focus,
      .form-select:focus {
        border-color: #9b5de0;
        box-shadow: 0 0 0 0.2rem rgba(155, 93, 224, 0.25);
      }

      .btn-submit {
        width: 100%;
        background: linear-gradient(135deg, #9b5de0, #667eea);
        color: white;
        border: none;
        padding: 15px;
        border-radius: 10px;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: transform 0.3s;
      }

      .btn-submit:hover {
        transform: translateY(-2px);
      }

      /* About Page Styles */
      .about-section {
        max-width: 800px;
        margin: 40px auto;
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      }

      .about-section h2 {
        color: #9b5de0;
        margin-bottom: 20px;
      }

      .about-section h4 {
        color: #667eea;
        margin-top: 30px;
        margin-bottom: 15px;
      }

      .profile-info {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
      }

      .profile-info p {
        margin: 10px 0;
        font-size: 1.1rem;
      }

      .add-topic-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ffb433, #ffd700);
        border: none;
        border-radius: 50%;
        font-size: 2rem;
        color: white;
        cursor: pointer;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s;
      }

      .add-topic-btn:hover {
        transform: scale(1.1);
      }

      @media (max-width: 768px) {
        .flashcard {
          width: 90vw;
          height: 300px;
        }

        .flashcard-face {
          font-size: 1.3rem;
          padding: 20px;
        }

        .hero-title {
          font-size: 1.8rem;
        }

        .header-title {
          font-size: 2rem;
        }

        .header-subtitle {
          font-size: 1rem;
        }

        .header-video-container {
          height: 200px;
        }

        .topic-grid {
          grid-template-columns: 1fr;
        }

        .controls {
          flex-direction: column;
        }

        .flashcard-gallery {
          flex-direction: column;
        }

        .gallery-image {
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="progress-bar-container">
      <div class="progress-bar-fill" id="progressBar"></div>
    </div>

    <!-- Header Video -->
    <div class="header-video-container">
      <video
        class="header-video"
        autoplay
        muted
        loop
        playsinline
        preload="auto"
      >
        <source src="asset/V1.mp4" type="video/mp4" />
      </video>
      <div class="header-overlay">
        <h1 class="header-title">QuickRevise Flashcards</h1>
        <p class="header-subtitle">Belajar Cerdas, Hasil Maksimal</p>
      </div>
    </div>

    <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#" onclick="showPage('home')"
          >üìö QuickRevise</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="showPage('home')">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="showPage('create')"
                >Create Card</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" onclick="showPage('about')">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-main">
      <!-- Home Page -->
      <div id="homePage" class="page-section active">
        <div class="hero-section">
          <h1 class="hero-title">Mulai Belajar dengan Flashcards</h1>
          <p class="hero-subtitle">
            Pilih topik dan mulai perjalanan belajarmu!
          </p>
        </div>

        <!-- Flashcard Gallery -->
        <div class="flashcard-gallery">
          <img
            src="asset/PG 1.jpg"
            alt="Flashcard Design 1"
            class="gallery-image"
          />
          <img
            src="asset/PG 2.jpg"
            alt="Flashcard Design 2"
            class="gallery-image"
          />
          <img
            src="asset/PG 3.jpg"
            alt="Flashcard Design 3"
            class="gallery-image"
          />
        </div>

        <div class="topic-grid" id="topicGrid"></div>

        <button class="add-topic-btn" onclick="showCreateTopicModal()">
          +
        </button>
      </div>

      <!-- Study Page -->
      <div id="studyPage" class="page-section">
        <div class="study-container">
          <button class="btn btn-light mb-4" onclick="showPage('home')">
            ‚Üê Kembali ke Topik
          </button>

          <div class="flashcard-wrapper">
            <div class="flashcard" id="flashcard">
              <div class="flashcard-face flashcard-front" id="cardFront">
                <span id="termText">Istilah</span>
              </div>
              <div class="flashcard-face flashcard-back" id="cardBack">
                <button class="delete-card-btn" onclick="deleteCurrentCard()">
                  üóëÔ∏è
                </button>
                <span id="definitionText">Definisi</span>
              </div>
            </div>
          </div>

          <div class="controls">
            <button class="btn-control" onclick="previousCard()">
              ‚Üê Sebelumnya
            </button>
            <button class="btn-control btn-flip" onclick="flipCard()">
              üîÑ Balik
            </button>
            <button class="btn-control" onclick="nextCard()">
              Berikutnya ‚Üí
            </button>
          </div>

          <div class="card-counter" id="cardCounter">1 / 1</div>
        </div>
      </div>

      <!-- Create Card Page -->
      <div id="createPage" class="page-section">
        <div class="form-container">
          <h2>Buat Kartu Baru</h2>
          <form onsubmit="saveCard(event)">
            <div class="mb-3">
              <label class="form-label">Istilah (Sisi Depan) *</label>
              <input
                type="text"
                class="form-control"
                id="cardTerm"
                required
                placeholder="Masukkan istilah..."
              />
            </div>
            <div class="mb-3">
              <label class="form-label">Definisi (Sisi Belakang) *</label>
              <textarea
                class="form-control"
                id="cardDefinition"
                rows="4"
                required
                placeholder="Masukkan definisi..."
              ></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Pilih Topik *</label>
              <select class="form-select" id="cardTopic" required></select>
            </div>
            <button type="submit" class="btn-submit">Simpan Kartu</button>
          </form>
        </div>
      </div>

      <!-- About Page -->
      <div id="aboutPage" class="page-section">
        <div class="about-section">
          <h2>Tentang QuickRevise Flashcards</h2>
          <p>
            QuickRevise Flashcards adalah aplikasi web interaktif yang dirancang
            khusus untuk membantu mahasiswa dalam proses belajar. Aplikasi ini
            menyediakan cara yang cepat dan efektif untuk menghafal dan memahami
            berbagai konsep, istilah, dan definisi.
          </p>

          <h4>Fitur Utama:</h4>
          <ul>
            <li>
              Kartu flashcard interaktif dengan animasi 3D flip yang menarik
            </li>
            <li>Manajemen topik untuk mengorganisir materi belajar</li>
            <li>Tambah, edit, dan hapus kartu dengan mudah</li>
            <li>Progress bar untuk melacak kemajuan belajar</li>
            <li>Desain modern dan responsive untuk semua perangkat</li>
            <li>Data tersimpan secara lokal di browser</li>
          </ul>

          <h4>Dikembangkan Oleh:</h4>
          <div class="profile-info">
            <p><strong>Nama:</strong> Shella Roudhotul Jannah</p>
            <p><strong>Semester:</strong> 5</p>
            <p><strong>Program Studi:</strong> Bisnis Digital</p>
          </div>

          <h4>Teknologi yang Digunakan:</h4>
          <p>
            Aplikasi ini dibangun menggunakan HTML5, CSS3, JavaScript, Bootstrap
            5, dan Anime.js untuk memberikan pengalaman belajar yang modern dan
            interaktif.
          </p>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
      // State Management
      let currentTopicId = null;
      let currentCardIndex = 0;
      let currentCards = [];
      let isFlipped = false;

      // Initialize App
      function initApp() {
        const topics = getTopics();
        if (topics.length === 0) {
          initializeDefaultData();
        }
        loadTopics();
        loadTopicOptions();
      }

      // Initialize Default Data
      function initializeDefaultData() {
        const defaultTopics = [
          { id: "topic1", name: "Bahasa Inggris", cardCount: 0 },
          { id: "topic2", name: "Matematika", cardCount: 0 },
          { id: "topic3", name: "Pemrograman", cardCount: 0 },
        ];

        const defaultCards = [
          {
            id: "card1",
            topicId: "topic1",
            term: "Hello",
            definition: "Halo (sapaan)",
          },
          {
            id: "card2",
            topicId: "topic1",
            term: "Thank you",
            definition: "Terima kasih",
          },
          {
            id: "card3",
            topicId: "topic2",
            term: "Pythagoras",
            definition: "a¬≤ + b¬≤ = c¬≤",
          },
          {
            id: "card4",
            topicId: "topic3",
            term: "Variable",
            definition: "Tempat penyimpanan data dalam program",
          },
        ];

        localStorage.setItem("topics", JSON.stringify(defaultTopics));
        localStorage.setItem("cards", JSON.stringify(defaultCards));
        updateTopicCardCounts();
      }

      // LocalStorage Functions
      function getTopics() {
        return JSON.parse(localStorage.getItem("topics") || "[]");
      }

      function saveTopics(topics) {
        localStorage.setItem("topics", JSON.stringify(topics));
      }

      function getCards() {
        return JSON.parse(localStorage.getItem("cards") || "[]");
      }

      function saveCards(cards) {
        localStorage.setItem("cards", JSON.stringify(cards));
      }

      function updateTopicCardCounts() {
        const topics = getTopics();
        const cards = getCards();

        topics.forEach((topic) => {
          topic.cardCount = cards.filter(
            (card) => card.topicId === topic.id
          ).length;
        });

        saveTopics(topics);
      }

      // Load Topics Grid
      function loadTopics() {
        updateTopicCardCounts();
        const topics = getTopics();
        const grid = document.getElementById("topicGrid");

        if (topics.length === 0) {
          grid.innerHTML =
            '<p style="color: white; text-align: center; width: 100%;">Belum ada topik. Klik tombol + untuk menambah topik baru.</p>';
          return;
        }

        grid.innerHTML = topics
          .map(
            (topic) => `
                <div class="topic-card" onclick="startStudy('${topic.id}')">
                    <button class="delete-topic-btn" onclick="event.stopPropagation(); deleteTopic('${topic.id}')">√ó</button>
                    <h3>${topic.name}</h3>
                    <p>${topic.cardCount} kartu</p>
                </div>
            `
          )
          .join("");

        animateTopicCards();
      }

      function animateTopicCards() {
        anime({
          targets: ".topic-card",
          scale: [0, 1],
          opacity: [0, 1],
          delay: anime.stagger(100),
          duration: 600,
          easing: "easeOutElastic(1, .8)",
        });
      }

      // Animate Gallery Images
      function animateGallery() {
        anime({
          targets: ".gallery-image",
          translateY: [50, 0],
          opacity: [0, 1],
          delay: anime.stagger(200),
          duration: 800,
          easing: "easeOutExpo",
        });
      }

      // Load Topic Options for Create Card
      function loadTopicOptions() {
        const topics = getTopics();
        const select = document.getElementById("cardTopic");

        select.innerHTML = topics
          .map((topic) => `<option value="${topic.id}">${topic.name}</option>`)
          .join("");
      }

      // Create Topic Modal (using prompt for simplicity)
      function showCreateTopicModal() {
        const topicName = prompt("Masukkan nama topik baru:");
        if (topicName && topicName.trim()) {
          const topics = getTopics();
          const newTopic = {
            id: "topic" + Date.now(),
            name: topicName.trim(),
            cardCount: 0,
          };
          topics.push(newTopic);
          saveTopics(topics);
          loadTopics();
          loadTopicOptions();
        }
      }

      // Delete Topic
      function deleteTopic(topicId) {
        if (
          !confirm(
            "Hapus topik ini? Semua kartu dalam topik ini akan ikut terhapus."
          )
        )
          return;

        let topics = getTopics();
        let cards = getCards();

        topics = topics.filter((t) => t.id !== topicId);
        cards = cards.filter((c) => c.topicId !== topicId);

        saveTopics(topics);
        saveCards(cards);
        loadTopics();
      }

      // Start Study Session
      function startStudy(topicId) {
        currentTopicId = topicId;
        const cards = getCards().filter((c) => c.topicId === topicId);

        if (cards.length === 0) {
          alert(
            "Topik ini belum memiliki kartu. Silakan buat kartu terlebih dahulu."
          );
          return;
        }

        currentCards = cards;
        currentCardIndex = 0;
        isFlipped = false;

        showPage("study");
        displayCard();
        updateProgressBar();
        shuffleIntroAnimation();
      }

      // Shuffle Intro Animation
      function shuffleIntroAnimation() {
        anime({
          targets: ".flashcard",
          translateX: [
            { value: -100, duration: 100 },
            { value: 100, duration: 100 },
            { value: -50, duration: 100 },
            { value: 50, duration: 100 },
            { value: 0, duration: 200 },
          ],
          scale: [0.8, 1],
          opacity: [0, 1],
          easing: "easeOutExpo",
        });
      }

      // Display Current Card
      function displayCard() {
        if (currentCards.length === 0) return;

        const card = currentCards[currentCardIndex];
        document.getElementById("termText").textContent = card.term;
        document.getElementById("definitionText").textContent = card.definition;
        document.getElementById("cardCounter").textContent = `${
          currentCardIndex + 1
        } / ${currentCards.length}`;

        // Reset flip
        if (isFlipped) {
          // Instantly reset flip without animation to avoid conflict with slide transition
          isFlipped = false;
          anime({
            targets: ".flashcard",
            rotateY: 0,
            duration: 0,
          });
        }
      }

      // Flip Card Animation
      function flipCard() {
        isFlipped = !isFlipped;

        anime({
          targets: ".flashcard",
          rotateY: isFlipped ? 180 : 0,
          duration: 600,
          easing: "easeInOutQuad",
        });
      }

      // Navigation
      function nextCard() {
        if (currentCardIndex < currentCards.length - 1) {
          slideTransition("right");
          currentCardIndex++;
          setTimeout(() => {
            displayCard();
            updateProgressBar();
          }, 300);
        }
      }

      function previousCard() {
        if (currentCardIndex > 0) {
          slideTransition("left");
          currentCardIndex--;
          setTimeout(() => {
            displayCard();
            updateProgressBar();
          }, 300);
        }
      }

      function slideTransition(direction) {
        const translateX = direction === "right" ? -600 : 600;

        anime({
          targets: ".flashcard",
          translateX: [0, translateX],
          opacity: [1, 0],
          duration: 300,
          easing: "easeInQuad",
          complete: () => {
            anime({
              targets: ".flashcard",
              translateX: [-translateX, 0],
              opacity: [0, 1],
              duration: 300,
              easing: "easeOutQuad",
            });
          },
        });
      }

      // Update Progress Bar
      function updateProgressBar() {
        const progress = ((currentCardIndex + 1) / currentCards.length) * 100;
        document.getElementById("progressBar").style.width = progress + "%";
      }

      // Save New Card
      function saveCard(event) {
        event.preventDefault();

        const term = document.getElementById("cardTerm").value.trim();
        const definition = document
          .getElementById("cardDefinition")
          .value.trim();
        const topicId = document.getElementById("cardTopic").value;

        if (!term || !definition || !topicId) {
          alert("Semua field harus diisi!");
          return;
        }

        const cards = getCards();
        const newCard = {
          id: "card" + Date.now(),
          topicId: topicId,
          term: term,
          definition: definition,
        };

        cards.push(newCard);
        saveCards(cards);
        updateTopicCardCounts();

        // Reset form
        document.getElementById("cardTerm").value = "";
        document.getElementById("cardDefinition").value = "";

        alert("Kartu berhasil disimpan!");
        showPage("home");
      }

      // Delete Current Card
      function deleteCurrentCard() {
        if (!confirm("Hapus kartu ini?")) return;

        let cards = getCards();
        const cardToDelete = currentCards[currentCardIndex];

        cards = cards.filter((c) => c.id !== cardToDelete.id);
        saveCards(cards);
        updateTopicCardCounts();

        // Update current cards array
        currentCards = cards.filter((c) => c.topicId === currentTopicId);

        if (currentCards.length === 0) {
          alert("Semua kartu telah dihapus. Kembali ke halaman topik.");
          showPage("home");
          return;
        }

        // Adjust index if necessary
        if (currentCardIndex >= currentCards.length) {
          currentCardIndex = currentCards.length - 1;
        }

        displayCard();
        updateProgressBar();
      }

      // Page Navigation
      function showPage(pageName) {
        document.querySelectorAll(".page-section").forEach((section) => {
          section.classList.remove("active");
        });

        document.getElementById(pageName + "Page").classList.add("active");

        if (pageName === "home") {
          loadTopics();
          document.getElementById("progressBar").style.width = "0%";
          setTimeout(animateGallery, 100);
        } else if (pageName === "create") {
          loadTopicOptions();
        }
      }

      // Initialize on load
      window.onload = initApp;
    </script>
  </body>
</html>
